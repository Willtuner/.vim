#!/usr/bin/env bash

help-info() {
    echo "Usage: $0 project-requirements fixed-version-requirements"
}
if [[ -z "$1" || -z "$2" ]]; then
    help-info
    exit 1
fi

patterns=($(awk -F= '{print $1}' "$1" | sed '/^[[:space:]]*$/d' | tr '[:upper:]' '[:lower:]' | tr '_' '-' | xargs printf -- '-e\n%s\n'))
# remove bom
grep -i ${patterns[@]} <(cat "$2" | tr '_' '-') | sed "1s/$(printf '\357\273\277')//"
